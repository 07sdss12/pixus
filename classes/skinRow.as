// skinRow class// (cc)2008-2010 JPEG Interactive// By Jam Zhang// jammind@gmail.compackage {	import flash.display.MovieClip;	import flash.display.Sprite;	import flash.display.Loader;	import flash.text.TextField;	import flash.text.TextFormat;	import flash.text.TextFieldAutoSize;	import flash.events.Event;	import flash.events.MouseEvent;	import flash.geom.Rectangle;	import flash.desktop.NativeApplication;	import flash.net.SharedObject;	import flash.net.URLRequest;	import com.google.analytics.GATracker;	import caurina.transitions.Tweener;	public class skinRow extends menuRow {				public static const MENU_GROUP_NAME:String='skinRow';		var loader:Loader=new Loader();		private var tracker:GATracker=pixusShell.tracker;		public function skinRow() {			super(pixusShell.ROW_WIDTH,pixusShell.SKIN_ROW_HEIGHT,MENU_GROUP_NAME);			addEventListener(Event.ADDED_TO_STAGE, init);		}		public function init(event:Event):void {						removeEventListener(Event.ADDED_TO_STAGE, init);			addEventListener(Event.REMOVED_FROM_STAGE, dispose);						// HandlesTextFields			tfTitle.text=pixusShell.skinpresets.skin[id].@title;			tfSubtitle.text=pixusShell.skinpresets.skin[id].@subtitle;			loader.load(new URLRequest(pixusShell.skinpresets.skin[id].file.@thumbnail));			tn.addChild(loader);			hidden.bApply.addEventListener(MouseEvent.CLICK, handleApply);			tn.addEventListener(MouseEvent.CLICK, handleApply);			tn.buttonMode=true;					}				public function dispose(event:Event):void {			//addEventListener(Event.ADDED_TO_STAGE, init);			removeEventListener(Event.REMOVED_FROM_STAGE, dispose);						hidden.bApply.removeEventListener(MouseEvent.CLICK, handleApply);			tn.removeEventListener(MouseEvent.CLICK, handleApply);			tn.removeChild(loader);			loader.unloadAndStop();		}		function handleApply(event:MouseEvent):void {			tracker.trackPageview('Preferences/Skins/Apply/'+pixusShell.skinpresets.skin[id].@title);			pixusShell.options.skin=id;			NativeApplication.nativeApplication.dispatchEvent(new Event(pixusShell.EVENT_APPLY_SKIN));		}	}}